{"hash":"81b43fc2f610cc4b5c95305a2e21f8117e7a6fc1","data":{"tag":{"id":"servers","title":"servers","path":"/tag/servers/","belongsTo":{"totalCount":2,"pageInfo":{"totalPages":1,"currentPage":1},"edges":[{"node":{"id":"5289d8c12ee413718364cacd9e6d4c62","title":"Runcloud configuration for Craft CMS","datetime":"2020-05-03 00:00:00","path":"/runcloud-configuration-for-craft-cms/","content":"<p>If you're setting up a Craft CMS website on a <a href=\"https://runcloud.io/r/ZMrWgZNDeyRw\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">RunCloud</a> server for your first time, here is everything you need to get setup.</p>\n<h2 id=\"install-imagick-on-the-server\"><a href=\"#install-imagick-on-the-server\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Install Imagick on the server</h2>\n<p>This is the preferred image rendering library for Craft CMS. It handles transforming images much better than the pre-installed module, GD, and is highly recommended for not only Craft but also WordPress and other popular CMS's. RunCloud offers some documentation on other common PHP modules you can obtain here:<a href=\"https://runcloud.io/docs/guide/cheat-sheet/php#installing-modules\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://runcloud.io/docs/guide/cheat-sheet/php#installing-modules</a></p>\n<p>Start by opening up a terminal window and SSH into your server as your root user.</p>\n<pre class=\"shiki\" style=\"background-color: #0F111A\"><code><span style=\"color: #FFFFFF\">ssh root@SERVER_IP_ADDRESS</span></code></pre>\n<p>Install Imagick for all available versions of PHP that you wish to use on the server. At the time of this writing 7.4 is the latest. Replace the numbers in the formula below with whatever version you want to use.</p>\n<p><strong>Example:</strong> I am installing Imagick for PHP 7.1 and 7.4 since those are the only two versions I'll be using on my server here is the command I will run to install both versions.</p>\n<pre class=\"shiki\" style=\"background-color: #0F111A\"><code><span style=\"color: #FFFFFF\">apt-get install php71rc-pecl-imagick php74rc-pecl-imagick</span></code></pre>\n<p>To get the changes to take place, restart PHP by running the following:  Also, be sure to replace the PHP versions with whatever versions you'll be using.</p>\n<pre class=\"shiki\" style=\"background-color: #0F111A\"><code><span style=\"color: #FFFFFF\">systemctl reload php71rc-fpm</span>\n<span style=\"color: #FFFFFF\">systemctl reload php74rc-fpm</span></code></pre>\n<h2 id=\"configure-php-settings-within-the-runcloud-dashboard\"><a href=\"#configure-php-settings-within-the-runcloud-dashboard\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Configure PHP Settings within the RunCloud Dashboard</h2>\n<p>For each web application you create that uses Craft; Here are the settings I have applied to each application, based upon Craft's PHP system requirements. To get to the PHP application settings in RunCloud, go to <em>Web Application → [App Name] → Settings</em>, then scroll down to PHP Settings.</p>\n<h3 id=\"open_basedir\"><a href=\"#open_basedir\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>open_basedir</h3>\n<p>Remove everything in this field:</p>\n<code class=\"shiki\" style=\"background: #2e3440; color: #d8dee9\">Default: /home/undefined/webapps/undefined:/var/lib/php/session:/tmp</code>\n<p><strong>Note:</strong> Keeping the default field info will fail Craft CMS updates on the production site.</p>\n<h3 id=\"disable_functions\"><a href=\"#disable_functions\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>disable_functions</h3>\n<p>Remove the following functions from the list as they are needed for the Craft Plugin Store and sending Emails.</p>\n<ul>\n<li><code class=\"shiki-inline\" style=\"background: #2e3440; color: #d8dee9\">proc_open</code></li>\n<li><code class=\"shiki-inline\" style=\"background: #2e3440; color: #d8dee9\">proc_close</code></li>\n<li><code class=\"shiki-inline\" style=\"background: #2e3440; color: #d8dee9\">proc_terminate</code></li>\n</ul>\n<h3 id=\"max_execution_time\"><a href=\"#max_execution_time\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>max_execution_time</h3>\n<p>Change default max_execution_time to 300.</p>\n<p><strong>Note:</strong> Craft requires a minimum PHP max execution of 120s.</p>\n<h3 id=\"rebuild-the-application-to-apply-changes\"><a href=\"#rebuild-the-application-to-apply-changes\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Rebuild the Application to apply changes</h3>\n<p>After adjusting the settings RunCloud recommends you to rebuild the application. To do this, click on the \"More\" button on the top right portion of the screen and select \"Rebuild web application\".</p>\n<p>Repeat the Configure PHP Settings process for each application that you want to set up on the server.</p>\n<p>Your Runcloud server is now properly set up for use with Craft CMS! If you have any issues or additional input, feel free to leave a comment or get a hold of me on <a href=\"https://twitter.com/bryandugan\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Twitter</a></p>\n","excerpt":"","description":"If you're setting up a Craft CMS website on a RunCloud server for your first time, here is everything you need to get setup.","timeToRead":2,"author":{"id":"bryan-dugan","title":"bryan-dugan","path":"/author/bryan-dugan/"}}},{"node":{"id":"72efb94ae529e631f7d1bc4b57b77c50","title":"Serverpilot Server Configuation","datetime":"2019-10-02 00:00:00","path":"/serverpilot-server-configuation/","content":"<p>This is a list of all the configuration changes I made to my Digital Ocean/ServerPilot server.</p>\n<h2 id=\"installed-applications\"><a href=\"#installed-applications\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Installed Applications</h2>\n<p>I have installed the Auto MySql Backup, Imagick, and Zip/Unzip applications to the server. Refer to the instructions below on how to install them yourself.</p>\n<h3 id=\"auto-mysql-backup\"><a href=\"#auto-mysql-backup\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Auto MySQL Backup</h3>\n<pre class=\"shiki\" style=\"background-color: #0F111A\"><code><span style=\"color: #FFFFFF\">apt-get install automysqlbackup</span></code></pre>\n<h3 id=\"imagick\"><a href=\"#imagick\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Imagick</h3>\n<p><strong>Note:</strong> Replace the PHP version 7.3 with whatever version of PHP you are using.</p>\n<pre class=\"shiki\" style=\"background-color: #0F111A\"><code><span style=\"color: #FFFFFF\">sudo pecl7.3-sp install imagick</span></code></pre>\n<p>Select autodetect from settings</p>\n<p><strong>Copy installation to PHP 7.3</strong></p>\n<p><strong>Note:</strong> Replace 7.3 with whatever version of PHP you are using.</p>\n<pre class=\"shiki\" style=\"background-color: #0F111A\"><code><span style=\"color: #FFFFFF\">sudo bash -c </span><span style=\"color: #89DDFF\">\"</span><span style=\"color: #C3E88D\">echo extension=imagick.so &gt; /etc/php7.3-sp/conf.d/imagick.ini</span><span style=\"color: #89DDFF\">\"</span></code></pre>\n<p><strong>Restart PHP</strong></p>\n<p><strong>Note:</strong> Replace 7.3 with whatever version of PHP you are using.</p>\n<pre class=\"shiki\" style=\"background-color: #0F111A\"><code><span style=\"color: #FFFFFF\">sudo service php7.3-fpm-sp restart</span></code></pre>\n<h3 id=\"zip--unzip\"><a href=\"#zip--unzip\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Zip / Unzip</h3>\n<pre class=\"shiki\" style=\"background-color: #0F111A\"><code><span style=\"color: #FFFFFF\">apt-get install zip unzip</span></code></pre>\n<h2 id=\"change-php-settings-per-application\"><a href=\"#change-php-settings-per-application\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Change PHP Settings per Application</h2>\n<p>To change PHP.ini settings in each app, create a file called <code class=\"shiki-inline\" style=\"background: #2e3440; color: #d8dee9\">.user.ini</code> and place in your public folder</p>\n<pre class=\"shiki\" style=\"background-color: #0F111A\"><code><span style=\"color: #FFFFFF\">vim apps/APPNAME/public/.user.ini</span></code></pre>\n<pre class=\"shiki\" style=\"background-color: #0F111A\"><code><span style=\"color: #8F93A2\">memory_limit</span><span style=\"color: #FFFFFF\"> </span><span style=\"color: #C792EA\">=</span><span style=\"color: #FFFFFF\"> 512M</span>\n<span style=\"color: #8F93A2\">max_execution_time</span><span style=\"color: #FFFFFF\"> </span><span style=\"color: #C792EA\">=</span><span style=\"color: #FFFFFF\"> </span><span style=\"color: #F78C6C\">300</span>\n<span style=\"color: #8F93A2\">upload_max_filesize</span><span style=\"color: #FFFFFF\"> </span><span style=\"color: #C792EA\">=</span><span style=\"color: #FFFFFF\"> 512M</span></code></pre>\n<h2 id=\"change-mysql-default-settings\"><a href=\"#change-mysql-default-settings\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Change MySQL Default Settings</h2>\n<pre class=\"shiki\" style=\"background-color: #0F111A\"><code><span style=\"color: #FFFFFF\">vim /etc/mysql/my.cnf</span></code></pre>\n<p><strong>Change max_allowed_packet setting from 16M to 32M</strong></p>\n<p><strong>Note:</strong> There was two places that need changing in the <code class=\"shiki-inline\" style=\"background: #2e3440; color: #d8dee9\">my.cnf</code> file</p>\n<code class=\"shiki\" style=\"background: #2e3440; color: #d8dee9\">max_allowed_packed = 32M</code>\n<p><strong>Restart MySQL for changes to take effect</strong></p>\n<pre class=\"shiki\" style=\"background-color: #0F111A\"><code><span style=\"color: #FFFFFF\">sudo service mysql restart</span></code></pre>\n","excerpt":"","description":"A list of all the configuration changes I made to my Digital Ocean/ServerPilot server.","timeToRead":1,"author":{"id":"bryan-dugan","title":"bryan-dugan","path":"/author/bryan-dugan/"}}}]}}},"context":{}}